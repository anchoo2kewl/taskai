# Multi-Project Webhook Configuration
# Copy this file to config.yaml and update with your actual values

server:
  port: 9876
  host: "0.0.0.0"
  log_level: "INFO"
  log_file: "/path/to/webhooks/logs/webhook.log"

# Default settings for all projects
defaults:
  secret: "your-default-webhook-secret"
  branch: "main"
  timeout: 30

# Project configurations
projects:
  # Example project configuration
  example-project:
    name: "Example Project"
    repository: "username/repository"
    secret: "your-webhook-secret-here"
    branch: "main"
    local_path: "/path/to/projects/example-project"
    actions:
      - type: "git_pull"
      - type: "custom_command"
        command: "echo 'Project updated successfully!'"
    enabled: false

  # TaskAI staging configuration
  taskai-staging:
    name: "TaskAI Staging"
    repository: "username/taskai"
    secret: "your-taskai-staging-webhook-secret"
    branch: "main"
    local_path: "/path/to/taskai-staging/source"
    actions:
      - type: "git_pull"
      - type: "custom_command"
        command: "cd /path/to/taskai-staging && docker compose build --no-cache && docker compose down && docker compose up -d"
      - type: "custom_command"
        command: "echo 'TaskAI staging deployed successfully!'"
    enabled: true

  # TaskAI production configuration
  taskai:
    name: "TaskAI Production"
    repository: "username/taskai"
    secret: "your-taskai-production-webhook-secret"
    branch: "main"
    local_path: "/path/to/taskai/source"
    actions:
      - type: "git_pull"
      - type: "custom_command"
        command: "cd /path/to/taskai && docker compose build --no-cache && docker compose down && docker compose up -d"
      - type: "custom_command"
        command: "echo 'TaskAI production deployed successfully!'"
    enabled: true

# Available action types:
# - git_pull: Automatically pulls from the repository
# - custom_command: Runs any shell command you specify
# - fix_permissions: Changes file permissions (requires command)
